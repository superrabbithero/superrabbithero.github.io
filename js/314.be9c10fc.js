"use strict";(self["webpackChunkaugest"]=self["webpackChunkaugest"]||[]).push([[314],{6131:function(t,e,s){s.d(e,{yU:function(){return l}});const i={name:"markethuang:xctest",pwd:"c34dd995a8132605764a9347dae6e8ca"},n=["","https://xqdsj-stagingtest1.xuece.cn/","https://xqdsj-stagingtest2.xuece.cn/"];let o="",a=19;function r(t){var e=n[t]+"api/usercenter/nnauth/user/login?username="+i.name+"&encryptpwd="+i.pwd+"&clienttype=BROWSER&clientversion=1.25.7&systemversion=chrome122.0.0.0";return new Promise(((t,s)=>{fetch(e).then((t=>{if(!t.ok)throw new Error("Network response was not ok");return t.json()})).then((e=>{o=e.data.authtoken,a=e.data.user.schoolId;const s=JSON.stringify({token:o,schoolId:a});h("xuecelogin",s,30),t(!0)})).catch((t=>{console.error("There was a problem with your fetch operation:",t),s(t)}))}))}function l(t,e,s){var i=n[t]+"api/examcenter/teacher/answercard/editinfo?exampaperId="+s;1==e&&(i=n[t]+"api/classworkcenter/teacher/classwork/answercard/get?classworkId="+s);const o=c("xuecelogin");var a=null;return o?a=JSON.parse(o):r(t).then(a=JSON.parse(o)).catch((t=>{console.error("There was a problem with your fetch operation:",t)})),new Promise(((n,o)=>{fetch(i,{method:"GET",headers:{Authtoken:a.token,"Xc-App-User-Schoolid":a.schoolId}}).then((t=>{if(!t.ok)throw new Error("Network response was not ok");return console.log(t),t.json()})).then((i=>{if("AUTH_EXPIRED"==i.code)r(t).then(l(t,e,s)).catch((t=>{throw new Error(t)}));else{if("ERROR"==i.code||"FAILURE"==i.code)throw new Error("未找到考试或作业");var o="",a="";1==e?(o=i.data[0].answercard.cutParamJsonStr,a=i.data[0].answercard.pdfUrl):(o=i.data.cutparamJsonstr2,a=i.data.pdfUrl),n([o,a])}})).catch((t=>{o(t)}))}))}function h(t,e,s){const i=new Date;i.setTime(i.getTime()+24*s*60*60*1e3);const n="expires="+i.toUTCString();document.cookie=t+"="+e+";"+n+";path=/"}function c(t){const e=t+"=",s=decodeURIComponent(document.cookie),i=s.split(";");for(let n=0;n<i.length;n++){let t=i[n];while(" "===t.charAt(0))t=t.substring(1);if(0===t.indexOf(e))return t.substring(e.length,t.length)}return""}},1213:function(t,e,s){s.r(e),s.d(e,{default:function(){return f}});var i=s(9812),n=s(4220);const o=(0,i._)("div",{class:"hello"},[(0,i._)("h1",null,"组件展示及测试界面")],-1),a={key:3},r=["innerHTML"];function l(t,e,s,l,h,c){const p=(0,i.up)("svg-icon"),d=(0,i.up)("TheLatex2Math"),u=(0,i.up)("JsonModel"),g=(0,i.up)("md-loader"),m=(0,i.up)("pagination"),w=(0,i.up)("timer");return(0,i.wg)(),(0,i.iD)(i.HY,null,[o,(0,i._)("button",{onClick:e[0]||(e[0]=t=>h.latx_show=!h.latx_show)},"公式"),(0,i.Wm)(p,{name:"test"}),(0,i.Wm)(p,{name:"download"}),(0,i._)("button",{onClick:e[1]||(e[1]=t=>h.json_show=!h.json_show)},"Json展示"),(0,i._)("button",{onClick:e[2]||(e[2]=(...t)=>c.showToast&&c.showToast(...t))},"展示toast"),(0,i._)("button",{onClick:e[3]||(e[3]=(...t)=>c.testapi&&c.testapi(...t))},"测试api"),(0,i._)("button",{onClick:e[4]||(e[4]=t=>h.page_show=!h.page_show)},"分页控件"),(0,i._)("button",{onClick:e[5]||(e[5]=t=>h.md_show=!h.md_show)},"markdown展示"),h.latx_show?((0,i.wg)(),(0,i.j4)(d,{key:0,latex:"\\frac{1}{2}"})):(0,i.kq)("",!0),h.json_show?((0,i.wg)(),(0,i.j4)(u,{key:1,"json-data":h.jsonData},null,8,["json-data"])):(0,i.kq)("",!0),h.md_show?((0,i.wg)(),(0,i.j4)(g,{key:2,mdFileName:"更新文档"})):(0,i.kq)("",!0),h.page_show?((0,i.wg)(),(0,i.iD)("div",a,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":e[6]||(e[6]=t=>h.totalPages=t),type:"text"},null,512),[[n.nr,h.totalPages]]),(0,i.Wm)(m,{totalPages:h.totalPages},null,8,["totalPages"])])):(0,i.kq)("",!0),(0,i._)("button",{onClick:e[7]||(e[7]=(...t)=>h.helloworldtimer.startTimer&&h.helloworldtimer.startTimer(...t))},"start"),(0,i._)("button",{onClick:e[8]||(e[8]=(...t)=>h.helloworldtimer.resetTimer&&h.helloworldtimer.resetTimer(...t))},"reset"),(0,i.Wm)(w,{ref:"helloworldtimer"},null,512),(0,i._)("div",{innerHTML:h.htmlcontent},null,8,r)],64)}var h=s(6451),c=s(2883),p=s(5054),d=s(6131),u=s(2305),g=s(3374),m={name:"HelloWorld",components:{TheLatex2Math:h.Z,JsonModel:c.Z,pagination:p.Z,pencanvas:u.Z,timer:g.Z},data(){return{jsonData:{name:"John",age:{name:"John",age:30}},toastType:0,page_show:!1,md_show:!1,latx_show:!1,json_show:!1,totalPages:6,helloworldtimer:null,htmlcontent:'<span class="output">$$\\frac{1}{2}$$</span><span class="output">$$\\sqrt{3}$$</span>'}},mounted(){this.helloworldtimer=this.$refs.helloworldtimer,this.TypeSet([document.getElementsByClassName("output")])},methods:{showToast(){var t=["success","info","warn","error"];this.$toast.show("Hello, world!",t[this.toastType]),console.log(t[this.toastType]),this.toastType=this.toastType>2?0:++this.toastType},testapi(){var t=this;(0,d.yU)(2,0,11617).then((e=>{t.jsonData=JSON.parse(e[0]),console.log(this.jsonData)})).catch((e=>{t.$toast.show(e,"error")}))},TypeSet(t){if(window.MathJax)return window.MathJax.startup.promise.then((()=>window.MathJax.typesetPromise(t))).catch((t=>console.log("Typeset failed: "+t.message))),window.MathJax.startup.promise;console.log("no window.MathJax")}}},w=s(8998);const v=(0,w.Z)(m,[["render",l]]);var f=v},5054:function(t,e,s){s.d(e,{Z:function(){return u}});var i=s(9812),n=s(5893);const o={class:"page-box",ref:"pageBox"},a={key:1,class:"page-item"},r=["onClick"],l={key:2,class:"page-item"};function h(t,e,s,h,c,p){const d=(0,i.up)("IconWrapper");return(0,i.wg)(),(0,i.iD)("div",o,[(0,i.Wm)(d,{onClick:e[0]||(e[0]=t=>p.pre()),iconName:"Left",theme:"outline",strokeWidth:4,fill:"#ffc848",size:"34"}),c.currentPage>3&&s.totalPages>10?((0,i.wg)(),(0,i.iD)("div",{key:0,class:"page-item",onClick:e[1]||(e[1]=t=>p.toPage(1))},"1")):(0,i.kq)("",!0),c.currentPage>4&&s.totalPages>10?((0,i.wg)(),(0,i.iD)("div",a,"...")):(0,i.kq)("",!0),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(c.currentList,(t=>((0,i.wg)(),(0,i.iD)("div",{class:(0,n.C_)({"page-item":!0,active:t==c.currentPage}),onClick:e=>p.toPage(t)},(0,n.zw)(t),11,r)))),256)),c.currentPage<s.totalPages-3&&s.totalPages>10?((0,i.wg)(),(0,i.iD)("div",l,"...")):(0,i.kq)("",!0),c.currentPage<s.totalPages-2&&s.totalPages>10?((0,i.wg)(),(0,i.iD)("div",{key:3,class:"page-item",onClick:e[2]||(e[2]=t=>p.toPage(s.totalPages))},(0,n.zw)(s.totalPages),1)):(0,i.kq)("",!0),(0,i.Wm)(d,{onClick:e[3]||(e[3]=t=>p.next()),iconName:"Right",theme:"outline",strokeWidth:4,fill:"#ffc848",size:"34"})],512)}s(7658);var c={props:{totalPages:{type:Number,required:!0}},data(){return{currentPage:1,currentList:[]}},mounted(){if(this.totalPages>10)this.currentList=[1,2,3,4,5];else for(var t=1;t<=this.totalPages;t++)this.currentList.push(t)},methods:{pre(){this.currentPage>1&&(this.currentPage--,this.$emit("page-change",this.currentPage)),this.totalPages>10&&this.refreshlist()},next(){this.currentPage<this.totalPages&&(this.currentPage++,this.$emit("page-change",this.currentPage)),this.totalPages>10&&this.refreshlist()},toPage(t){this.currentPage!=t&&(this.currentPage=t,this.$emit("page-change",this.currentPage)),this.totalPages>10&&this.refreshlist()},refreshlist(){if(this.currentList=[],this.totalPages-this.currentPage<2)for(var t=this.totalPages-4;t<=this.totalPages;t++)this.currentList.push(t);else if(this.currentPage<=3)this.currentList=[1,2,3,4,5];else for(t=this.currentPage-2;t<=this.currentPage+2;t++)this.currentList.push(t)}}},p=s(8998);const d=(0,p.Z)(c,[["render",h]]);var u=d},2305:function(t,e,s){s.d(e,{Z:function(){return $}});var i=s(9812),n=s(4220),o=s(5893),a=s.p+"img/pen.fe268fe1.png",r=s.p+"img/eraser.5178d610.png";const l=t=>((0,i.dD)("data-v-2c60087f"),t=t(),(0,i.Cn)(),t),h={src:a},c={src:r},p={class:"edit-tools"},d={class:"edit-tools-group"},u=l((()=>(0,i._)("img",{src:a},null,-1))),g=[u],m=l((()=>(0,i._)("img",{src:r},null,-1))),w=[m],v=l((()=>(0,i._)("svg",{fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[(0,i._)("path",{d:"M15 1v6H9V1h6zm-2 2h-2v2h2V3zm2 6v6H9V9h6zm-2 2h-2v2h2v-2zm2 6v6H9v-6h6zm-2 2h-2v2h2v-2z",fill:"currentColor"})],-1))),f=[v],x={class:"canvas-setting"},P=l((()=>(0,i._)("svg",{fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[(0,i._)("path",{d:"M5 3H3v18h18V3H5zm14 2v14H5V5h14zm-8 4H9V7H7v2h2v2h2v2H9v2H7v2h2v-2h2v-2h2v2h2v2h2v-2h-2v-2h-2v-2h2V9h2V7h-2v2h-2v2h-2V9z",fill:"currentColor"})],-1))),y=[P],T={class:"content-items"},k={class:"content-items"},_={class:"content-items"},C=["onClick"],D={class:"content-items"};function b(t,e,s,a,r,l){return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.wy)((0,i._)("canvas",{ref:"canvas",onPointerdown:e[0]||(e[0]=(...t)=>l.handlePointerDown&&l.handlePointerDown(...t)),onPointermove:e[1]||(e[1]=(...t)=>l.handlePointerMove&&l.handlePointerMove(...t)),onPointerup:e[2]||(e[2]=(...t)=>l.handlePointerUp&&l.handlePointerUp(...t))},null,544),[[n.F8,s.show]]),(0,i.wy)((0,i._)("div",{class:(0,o.C_)({"edit-tools-fixedbox":!0,show:r.editTools_show})},[(0,i._)("div",{class:(0,o.C_)({"edit-tools-handle":!0,show:!r.editTools_show}),onPointerdown:e[3]||(e[3]=(...t)=>l.handleStart&&l.handleStart(...t)),onPointermove:e[4]||(e[4]=(...t)=>l.handleMove&&l.handleMove(...t)),onPointerup:e[5]||(e[5]=(...t)=>l.handleEnd&&l.handleEnd(...t)),onPointerleave:e[6]||(e[6]=(...t)=>l.handleCancel&&l.handleCancel(...t))},[(0,i.wy)((0,i._)("img",h,null,512),[[n.F8,!r.erasing]]),(0,i.wy)((0,i._)("img",c,null,512),[[n.F8,r.erasing]])],34),(0,i._)("div",p,[(0,i._)("div",{style:{height:"100%","font-size":"18px","line-height":"50px",padding:"0 2px 0 2px",color:"#252525"},onClick:e[7]||(e[7]=t=>r.editTools_show=!1)},"×"),(0,i._)("div",d,[(0,i._)("div",{class:(0,o.C_)({"edit-tools-item":!0,active:!r.erasing}),onClick:e[8]||(e[8]=t=>l.getcanvastool("pencil"))},g,2),(0,i._)("div",{class:(0,o.C_)({"edit-tools-item":!0,active:r.erasing}),onClick:e[9]||(e[9]=t=>l.getcanvastool("eraser"))},w,2)]),(0,i._)("div",{style:{width:"25px",display:"flex",color:"#252525","margin-left":"15px"},onClick:e[10]||(e[10]=t=>r.setting_show=!0)},f)])],2),[[n.F8,s.show]]),(0,i.wy)((0,i._)("div",x,[(0,i._)("div",{style:{position:"absolute",top:"5px",right:"5px",width:"20px",color:"#ff5252"},onClick:e[11]||(e[11]=t=>r.setting_show=!1)},y),(0,i._)("div",T,[(0,i.Uk)(" 画笔大小： "),(0,i.wy)((0,i._)("input",{type:"range",class:"custom-range","onUpdate:modelValue":e[12]||(e[12]=t=>r.penWidth=t),min:"1",max:"15"},null,512),[[n.nr,r.penWidth]]),(0,i.Uk)(" "+(0,o.zw)(r.penWidth),1)]),(0,i._)("div",k,[(0,i.Uk)(" 橡皮大小： "),(0,i.wy)((0,i._)("input",{type:"range",class:"custom-range","onUpdate:modelValue":e[13]||(e[13]=t=>r.eraserWidth=t),min:"5",max:"30"},null,512),[[n.nr,r.eraserWidth]]),(0,i.Uk)(" "+(0,o.zw)(r.eraserWidth),1)]),(0,i._)("div",_,[(0,i.Uk)(" 画笔颜色： "),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.colorList,(t=>((0,i.wg)(),(0,i.iD)("div",{onClick:e=>r.penColor=t,class:"color-item",style:(0,o.j5)({backgroundColor:t,height:t==r.penColor?"20px":"15px"})},null,12,C)))),256))]),(0,i._)("div",D,[(0,i.Uk)(" 仅触控笔： "),(0,i._)("div",{onClick:e[14]||(e[14]=t=>l.switchmode()),class:(0,o.C_)({"switch-botton":!0,close:"all touch"==r.mode})},null,2),(0,i.Uk)(" "+(0,o.zw)("only pen"==r.mode?"开":"关"),1)])],512),[[n.F8,s.show&&r.setting_show]])],64)}s(7658);var L={props:{show:{type:Boolean,required:!0,default:!1},width:Number,height:Number,switch:Number},watch:{switch(t,e){this.changeCanvas(t,e),console.log(t,e)},show(t,e){t?(this.resize(),document.body.classList.add("none-select")):document.body.classList.remove("none-select")}},data(){return{log:"",mode:"all touch",isDrawing:!1,drawData:null,isScroll:0,context:null,currentPointerType:null,multiLastPt:{},offsetTop:0,offsetLeft:0,isScroll:!1,startY:0,scrolltop:0,editTools_show:!1,erasing:!1,el:null,points:[],beginPoint:{x:0,y:0},penWidth:5,eraserWidth:10,penColor:"#f00",canvasWidth:0,canvasHeight:0,pressTimer:null,imgDataList:[],setting_show:!1,colorList:["#000","#f00","#ffa500","#ff0","#90ee90","#87ceeb","#fff"]}},mounted(){this.init()},beforeUnmount(){document.body.classList.remove("none-select")},methods:{changePenWidth(){const t=document.getElementById("penWidth-range");this.penWidth=parseInt(t.value)},resize(t=null){const e=this.$refs.canvas;let s=null;s=null==t?this.context.getImageData(0,0,e.width,e.height):t;const i=this.context.strokeStyle,n=this.context.fillStyle,o=this.context.lineWidth,a=this.context.font,r=this.context.textAlign,l=this.context.textBaseline,h=this.context.globalCompositeOperation;e.width=this.el.clientWidth,e.height=this.el.clientHeight,this.canvasWidth=e.width,this.canvasHeight=e.height,this.context.clearRect(0,0,e.width,e.height),this.context.strokeStyle=i,this.context.fillStyle=n,this.context.lineWidth=o,this.context.font=a,this.context.textAlign=r,this.context.textBaseline=l,this.context.globalCompositeOperation=h,""!=s&&this.context.putImageData(s,0,0)},init(){window.PointerEvent&&(this.log="Pointer events are supported.");const t=this.$refs.canvas,e=t.parentElement;t.width=e.clientWidth,t.height=e.clientHeight,this.canvasWidth=t.width,this.canvasHeight=t.height,this.el=e,this.offsetLeft=e.offsetLeft,this.offsetTop=e.offsetTop,this.context=t.getContext("2d"),this.context.strokeStyle=this.penColor},switchmode(){"only pen"==this.mode?this.mode="all touch":this.mode="only pen"},handlePointerDown(t){this.currentPointerType=t.pointerType,"all touch"==this.mode&&"pen"==this.currentPointerType&&(this.mode="only pen",this.$toast.show('检测到正在使用触控笔，开启"only pen"模式，可在画板设置中关闭',"info"));var e=t.pointerId;this.multiLastPt[e]={x:t.pageX,y:t.pageY},"only pen"==this.mode&&"pen"===this.currentPointerType?(this.scrolltop=this.el.parentElement.scrollTop,this.isDrawing=!0,this.points=[],this.points.push({x:t.pageX,y:t.pageY}),this.beginPoint=this.points[0]):"only pen"==this.mode&&"touch"===this.currentPointerType?(this.isScroll=e,this.startY=t.pageY,this.scrolltop=this.el.parentElement.scrollTop):"all touch"===this.mode&&(this.scrolltop=this.el.parentElement.scrollTop,2==Object.keys(this.multiLastPt).length?(this.isDrawing=!1,this.isScroll=e,this.startY=t.pageY):1==Object.keys(this.multiLastPt).length&&(this.isDrawing=!0,this.points=[],this.points.push({x:t.pageX,y:t.pageY}),this.beginPoint=this.points[0]))},drawLine(t,e,s,i,n){this.context.beginPath(),this.context.moveTo(t.x-i,t.y-n),this.context.quadraticCurveTo(e.x-i,e.y-n,s.x-i,s.y-n),this.context.strokeStyle=this.penColor,this.context.lineCap="round",this.context.stroke(),this.context.closePath()},handlePointerMove(t){var e=t.pointerId;if(this.isDrawing&&this.multiLastPt[e]){if("only pen"==this.mode&&"pen"===this.currentPointerType||"all touch"===this.mode){var s=this.el.parentElement.scrollTop;this.erasing?this.context.lineWidth=this.eraserWidth:"pen"==this.currentPointerType?this.context.lineWidth=t.pressure*this.penWidth:this.context.lineWidth=this.penWidth;var i={x:t.pageX,y:t.pageY};if(this.points.push(i),this.points.length>2){const t=this.points.slice(-2),e=t[0],i={x:(t[0].x+t[1].x)/2,y:(t[0].y+t[1].y)/2};var n=this.offsetTop-s;this.drawLine(this.beginPoint,e,i,this.offsetLeft,n),this.beginPoint=i}}}else if(this.isScroll==e){const e=t.pageY-this.startY;this.el.parentElement.scrollTop=this.scrolltop-e}},handlePointerUp(t){var e=t.pointerId;this.isDrawing&&(this.isDrawing=!1),this.multiLastPt[e]&&delete this.multiLastPt[e],this.isScroll&&(this.isScroll=null)},getcanvastool(t){this.context;"pencil"==t?(this.context.globalCompositeOperation="source-over",this.erasing=!1):"eraser"==t&&(this.context.globalCompositeOperation="destination-out",this.erasing=!0)},handleStart(){this.pressTimer=setTimeout((()=>{this.setting_show=!0,clearTimeout(this.pressTimer),this.pressTimer=null}),500)},handleMove(t){this.pressTimer&&(clearTimeout(this.pressTimer),this.pressTimer=null)},handleEnd(){this.pressTimer&&(clearTimeout(this.pressTimer),this.pressTimer=null,this.getcanvastool(this.erasing?"pencil":"eraser"))},handleCancel(){this.pressTimer&&(clearTimeout(this.pressTimer),this.pressTimer=null)},changeCanvas(t,e){const s=this.$refs.canvas;let i=this.context.getImageData(0,0,s.width,s.height);this.imgDataList[e]=i,i=this.imgDataList[t]?this.imgDataList[t]:"";var n=this;this.$parent.$nextTick((()=>{n.resize(i)}))}}},W=s(8998);const S=(0,W.Z)(L,[["render",b],["__scopeId","data-v-2c60087f"]]);var $=S},3374:function(t,e,s){s.d(e,{Z:function(){return h}});var i=s(9812),n=s(5893);function o(t,e,s,o,a,r){return(0,i.wg)(),(0,i.iD)("div",null,(0,n.zw)(a.timer),1)}var a={data(){return{startTime:0,elapsedTime:0,timerInterval:null,timer:"00:00:00"}},unmounted(){clearInterval(this.timerInterval)},methods:{startTimer(){console.log("start"),this.startTime=Date.now()-this.elapsedTime,this.timerInterval=setInterval(this.updateTimer,1e3)},resetTimer(){clearInterval(this.timerInterval),this.elapsedTime=0,this.$parent.timer="00:00:00",this.timer="00:00:00"},pause(){clearInterval(this.timerInterval)},updateTimer(){this.elapsedTime=Date.now()-this.startTime;const t=new Date(this.elapsedTime),e=String(t.getUTCHours()).padStart(2,"0"),s=String(t.getUTCMinutes()).padStart(2,"0"),i=String(t.getUTCSeconds()).padStart(2,"0");this.timer=`${e}:${s}:${i}`,this.$parent.timer=this.timer}}},r=s(8998);const l=(0,r.Z)(a,[["render",o]]);var h=l},6451:function(t,e,s){s.d(e,{Z:function(){return c}});var i=s(9812),n=s(5893);const o={class:"output"};function a(t,e,s,a,r,l){return(0,i.wg)(),(0,i.iD)("span",o,"$$"+(0,n.zw)(s.latex)+"$$",1)}var r={name:"TheLate2Math",props:{latex:{type:String,required:!0}},setup(t){const e=async function(t){if(console.log(window.MathJax,"//window.MathJax"),window.MathJax)return window.MathJax.startup.promise.then((()=>window.MathJax.typesetPromise(t))).catch((t=>console.log("Typeset failed: "+t.message))),window.MathJax.startup.promise};return(0,i.bv)((()=>{e()})),(0,i.YP)((()=>t.latex),(()=>{e([document.getElementsByClassName("output")])})),{}}},l=s(8998);const h=(0,l.Z)(r,[["render",a]]);var c=h}}]);
//# sourceMappingURL=314.be9c10fc.js.map