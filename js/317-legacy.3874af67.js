"use strict";(self["webpackChunkaugest"]=self["webpackChunkaugest"]||[]).push([[317],{79007:function(e,t,n){n.r(t),n.d(t,{default:function(){return K}});n(82481);var a=n(19812),i=n(55893),r=n(89289),l={class:"line-content-center"},s=(0,a._)("label",null,"日期：",-1),o={class:"line-content-center"},d=(0,a._)("label",null,"期限：",-1),u={class:"line-content-center"},m=(0,a._)("label",null,"不重复",-1),c=(0,a._)("label",null,null,-1),g=(0,a._)("label",null,"每天",-1),p=(0,a._)("label",null,"每周",-1),h=(0,a._)("label",null,"每月",-1),f=(0,a._)("label",null,"每年",-1),D=(0,a._)("label",null,"艾宾豪斯记忆法",-1),v={class:"line-content-center"},w={class:"line-content-center"},y=(0,a._)("label",null,"紧急",-1),M=(0,a._)("label",null,"重要",-1),k={class:"line-content-center left"},_={class:"card-content main-content",style:{"text-align":"left"},ref:"fqtMain"},b={class:"calendar-list"},C=["onClick"],x={key:0,class:"date"},W={key:1,class:"date"},I={key:2,class:"date"},N={key:3,class:"date"},F=["id"],U=["onClick"],L=["onPointerdown"],T=["id"],V={class:"list-item",style:{display:"flex","justify-content":"center"}},Y={class:"axes x"},z=(0,a._)("div",{style:{"background-color":"#F96635"}},"重要",-1),P=[z],E={class:"axes y"},S=(0,a._)("div",{style:{"background-color":"#f9A822"}},"紧急",-1),j=[S];function q(e,t,n,z,S,q){var A=(0,a.up)("calender"),G=(0,a.up)("svg-icon"),B=(0,a.up)("my-model");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(B,{show:S.modal_show.addPlanShow,modalKey:"addPlanShow"},{default:(0,a.w5)((function(){return[(0,a._)("div",l,[s,(0,a.Wm)(A,{language:"EN",type:"input",style:{width:"150px"},class:"form-input",modelValue:S.management.date,"onUpdate:modelValue":t[0]||(t[0]=function(e){return S.management.date=e})},null,8,["modelValue"]),(0,a.Wm)(G,{class:(0,i.C_)({"text-button":!0,action:q.compareDate(S.management.date)}),name:"today",size:"16",onClick:t[1]||(t[1]=function(e){return q.getManagementDate()})},null,8,["class"]),(0,a.Wm)(G,{class:(0,i.C_)({"text-button":!0,action:q.compareDate(S.management.date,1)}),name:"tomorrow",size:"16",onClick:t[2]||(t[2]=function(e){return q.getManagementDate(1)})},null,8,["class"])]),(0,a._)("div",o,[d,(0,a.Wm)(A,{language:"EN",type:"datetime",style:{width:"150px"},class:"form-input",modelValue:S.management.deadline,"onUpdate:modelValue":t[3]||(t[3]=function(e){return S.management.deadline=e})},null,8,["modelValue"]),(0,a.Wm)(G,{class:"text-button",name:"delete02",size:"16",onClick:t[4]||(t[4]=function(e){return S.management.deadline=null})})]),(0,a._)("div",u,[(0,a.wy)((0,a._)("input",{class:"form-input",type:"radio",name:"repeat",value:"0","onUpdate:modelValue":t[5]||(t[5]=function(e){return S.management.repeat=e})},null,512),[[r.G2,S.management.repeat]]),m,c,(0,a.wy)((0,a._)("input",{class:"form-input",type:"radio",name:"repeat",value:"1","onUpdate:modelValue":t[6]||(t[6]=function(e){return S.management.repeat=e}),checked:""},null,512),[[r.G2,S.management.repeat]]),g,(0,a.wy)((0,a._)("input",{class:"form-input",type:"radio",name:"repeat",value:"7","onUpdate:modelValue":t[7]||(t[7]=function(e){return S.management.repeat=e})},null,512),[[r.G2,S.management.repeat]]),p,(0,a.wy)((0,a._)("input",{class:"form-input",type:"radio",name:"repeat",value:"30","onUpdate:modelValue":t[8]||(t[8]=function(e){return S.management.repeat=e})},null,512),[[r.G2,S.management.repeat]]),h,(0,a.wy)((0,a._)("input",{class:"form-input",type:"radio",name:"repeat",value:"-1","onUpdate:modelValue":t[9]||(t[9]=function(e){return S.management.repeat=e})},null,512),[[r.G2,S.management.repeat]]),f,(0,a.wy)((0,a._)("input",{class:"form-input",type:"radio",name:"repeat",value:"-2","onUpdate:modelValue":t[10]||(t[10]=function(e){return S.management.repeat=e})},null,512),[[r.G2,S.management.repeat]]),D]),(0,a._)("div",v,[(0,a.wy)((0,a._)("textarea",{placeholder:"做什么呢...",rows:"5","onUpdate:modelValue":t[11]||(t[11]=function(e){return S.management.content=e})},null,512),[[r.nr,S.management.content]])]),(0,a._)("div",w,[y,(0,a.wy)((0,a._)("input",{type:"checkbox",class:"circle form-input","onUpdate:modelValue":t[12]||(t[12]=function(e){return S.management.urgent=e}),checked:""},null,512),[[r.e8,S.management.urgent]]),M,(0,a.wy)((0,a._)("input",{type:"checkbox",class:"circle form-input","onUpdate:modelValue":t[13]||(t[13]=function(e){return S.management.important=e})},null,512),[[r.e8,S.management.important]])]),(0,a._)("div",k,[(0,a._)("button",{class:"fill",onClick:t[14]||(t[14]=function(e){return q.addManagement()})},(0,i.zw)(S.updateIndex?"修改计划":"新增计划"),1)])]})),_:1},8,["show"]),(0,a._)("div",_,[(0,a._)("div",b,[(0,a.Wm)(G,{name:"arrow-left",className:"date-item",onClick:q.preWeek},null,8,["onClick"]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(S.currentWeek,(function(e){return(0,a.wg)(),(0,a.iD)("div",{key:e,class:"date-item",onClick:function(t){return q.toDate(q.getFormattedDate(e))}},[q.getFormattedDate(e)==q.getFormattedDate(S.today)?((0,a.wg)(),(0,a.iD)("div",x,[(0,a.Wm)(G,{name:"today"})])):q.getFormattedDate(e)==q.getFormattedDate(S.today,1)?((0,a.wg)(),(0,a.iD)("div",W,[(0,a.Wm)(G,{name:"tomorrow"})])):q.getFormattedDate(e)==q.getFormattedDate(S.today,-1)?((0,a.wg)(),(0,a.iD)("div",I,[(0,a.Wm)(G,{name:"yesterday"})])):((0,a.wg)(),(0,a.iD)("div",N,(0,i.zw)(e.getDate()),1))],8,C)})),128)),(0,a.Wm)(G,{name:"arrow-right",className:"date-item",onClick:q.nextWeek},null,8,["onClick"]),(0,a.Wm)(G,{name:"plus01",className:"date-item",onClick:t[15]||(t[15]=function(e){return q.showAddPlan()})})]),(0,a.Uk)(" "+(0,i.zw)(S.currentDate)+" ",1),(0,a._)("div",{class:(0,i.C_)({"quadrant-container":!0,draging:S.draged})},[(0,a.wy)((0,a._)("div",{class:(0,i.C_)(q.dragedManagementClass),ref:"dragedManagement"},[(0,a.Wm)(G,{name:"dot01",size:"16",className:"dot",style:(0,i.j5)(q.dragedDotColor)},null,8,["style"]),(0,a.Uk)(" "+(0,i.zw)(S.dragedManagement?S.dragedManagement.content:""),1)],2),[[r.F8,S.draged]]),((0,a.wg)(),(0,a.iD)(a.HY,null,(0,a.Ko)(4,(function(e){return(0,a._)("div",{class:"quadrant-box",id:"quadrantList".concat(e)},[(0,a._)("div",{class:(0,i.C_)(["quadrant-list"]),onClick:function(t){return q.showAddPlan(e)}},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(S.currentManagementList[e-1],(function(n){return(0,a.wg)(),(0,a.iD)("div",{class:(0,i.C_)(["list-item","item-".concat(e-1)]),onClick:t[18]||(t[18]=(0,r.iM)((function(){}),["stop"])),onPointerdown:function(e){return q.listItemDown(e,n)}},[(0,a._)("div",{class:"content",style:(0,i.j5)({textDecoration:q.itemFinished(n)?"line-through":"none"})},[(0,a.Wm)(G,{name:"dot01",size:"16",className:"dot",style:(0,i.j5)({color:S.fourColors[e-1]})},null,8,["style"]),(0,a.Uk)(" "+(0,i.zw)(n.content),1)],4),(0,a._)("div",{id:"planIndex".concat(n.index),class:"line-content-center"},[(0,a.Wm)(G,{name:"flag01",size:"16",className:"dot",style:(0,i.j5)({color:S.fourColors[e-1]}),onClick:[t[16]||(t[16]=(0,r.iM)((function(){}),["stop"])),function(e){return q.finishItem(n)}]},null,8,["style","onClick"]),(0,a.Wm)(G,{name:"delete02",size:"16",className:"dot",style:(0,i.j5)({color:S.fourColors[e-1]}),onClick:[t[17]||(t[17]=(0,r.iM)((function(){}),["stop"])),function(e){return q.deleteItem(n)}]},null,8,["style","onClick"])],8,T)],42,L)})),256)),(0,a.wy)((0,a._)("div",V,[(0,a._)("div",{class:(0,i.C_)(["list-add-button-".concat(e-1)])},"+",2)],512),[[r.F8,!1]])],8,U)],8,F)})),64)),(0,a.wy)((0,a._)("div",Y,P,512),[[r.F8,!0]]),(0,a.wy)((0,a._)("div",E,j,512),[[r.F8,!0]])],2)],512)],64)}n(9653),n(92222),n(26699),n(32023),n(41539),n(54747),n(57658),n(40561);var A=n(81919),G=JSON.parse('[{"date":"2024/08/01","deadline":null,"repeat":0,"content":"今天完成事情1","urgent":true,"important":false,"repeatDate":[],"finishedDate":[]},{"date":"2024/08/02","deadline":null,"repeat":"0","content":"明天完成事件b 紧急且重要","urgent":true,"important":true,"repeatDate":[],"finishedDate":[]},{"date":"2024/08/02","deadline":null,"repeat":"1","content":"每天读书10分钟","urgent":false,"important":true,"repeatDate":[],"finishedDate":[]},{"date":"2024/08/02T00:00","deadline":null,"repeat":"7","content":"每周五晚上写周报","urgent":false,"important":true,"repeatDate":[],"finishedDate":[]},{"date":"2024/08/01","deadline":null,"repeat":"30","content":"每月完成一次1km跑步","urgent":false,"important":false,"repeatDate":[],"finishedDate":[]},{"date":"2024/11/09T00:00","deadline":null,"repeat":"-1","content":"庆祝老婆生日","urgent":false,"important":true,"repeatDate":[],"finishedDate":[]},{"date":"2024/08/01","deadline":null,"repeat":"-2","content":"单词背诵词典1","urgent":true,"important":true,"repeatDate":["2024/8/1","2024/8/2","2024/8/4","2024/8/8","2024/8/15","2024/8/30","2024/9/29"],"finishedDate":[]}]'),B={computed:{compareDate:function(){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e){var n=e.split("/"),a=new Date(Number(n[0]),Number(n[1])-1,Number(n[2])),i=new Date;return i.setDate(i.getDate()+t),"".concat(a.getYear()).concat(a.getMonth()).concat(a.getDate())=="".concat(i.getYear()).concat(i.getMonth()).concat(i.getDate())}return!1}},dragedManagementClass:function(){var e={"list-item":!0,draged:this.draged},t=[2,0,3,1];if(this.dragedManagement){var n=this.dragedManagement.urgent?1:0,a=this.dragedManagement.important?1:0,i=t[2*a+n],r="item-".concat(i);e[r]=!0}return e},dragedDotColor:function(){var e=[2,0,3,1];if(this.dragedManagement){var t=this.dragedManagement.urgent?1:0,n=this.dragedManagement.important?1:0,a=e[2*n+t];return{color:this.fourColors[a]}}},itemFinished:function(){var e=this;return function(t){return t.finishedDate.includes(e.currentDate)}}},components:{calender:A.Z},data:function(){return{fourColors:["#f9A822","#F96635","#2bbaa5","#93d3a2"],currentWeek:[],today:null,currentDate:null,currentManagementList:[[],[],[],[]],modal_show:{addPlanShow:!1},management:{date:null,deadline:null,repeat:0,content:"",urgent:!1,important:!1,repeatDate:[],finishedDate:[]},managementList:G,updateIndex:null,dragedManagement:null,draged:!1,drag2Index:null,pressTimer:null,disx:null,disy:null}},mounted:function(){this.getWeekDate(),this.toDate(this.getFormattedDate(this.today))},methods:{listItemDown:function(e,t){var n=this,a="planIndex".concat(t.index),i=document.getElementById(a);i.contains(e.target)||(document.addEventListener("pointerup",this.listItemUp),document.addEventListener("pointermove",this.listItemMove),this.dragedManagement=t,this.pressTimer=setTimeout((function(){n.draged=!0;var t=e.target;n.disx=e.pageX-t.offsetLeft,n.disy=e.pageY-t.offsetTop;var a=n.$refs.dragedManagement;a.style.left="".concat(e.pageX-n.disx,"px"),a.style.top="".concat(e.pageY-n.disy,"px"),clearTimeout(n.pressTimer),n.pressTimer=null}),500))},listItemMove:function(){if(this.draged){var e=document.getElementById("quadrantList4").getBoundingClientRect(),t=e.left,n=e.top,a=4;event.clientX<t?a=event.clientY<n?1:3:event.clientY<n&&(a=2),this.drag2Index=a;var i=this.$refs.dragedManagement;i.style.left="".concat(event.pageX-this.disx,"px"),i.style.top="".concat(event.pageY-this.disy,"px")}},listItemUp:function(e){if(this.pressTimer&&(clearTimeout(this.pressTimer),this.showAddPlan(this.dragedManagement),this.updateIndex=this.dragedManagement.index,this.dragedManagement=null),null!=this.dragedManagement){switch(this.drag2Index){case 1:this.dragedManagement.urgent=!0,this.dragedManagement.important=!1;break;case 2:this.dragedManagement.urgent=!0,this.dragedManagement.important=!0;break;case 3:this.dragedManagement.urgent=!1,this.dragedManagement.important=!1;break;case 4:this.dragedManagement.urgent=!1,this.dragedManagement.important=!0;break}this.updateManagement(this.dragedManagement)}this.draged=!1,this.dragedManagement=null,this.drag2Index=null,this.getCurManagementData(this.currentDate),document.removeEventListener("pointerup",this.listItemUp),document.removeEventListener("pointermove",this.listItemMove)},deleteItem:function(e){this.deleteManagement(e),this.getCurManagementData(this.currentDate)},finishItem:function(e){var t=this,n=null;e.finishedDate.forEach((function(e,a){t.currentDate!=e||(n=a)})),console.log(n),null==n?e.finishedDate.push(this.currentDate):e.finishedDate.splice(n,1),this.updateManagement(e),this.getCurManagementData(this.currentDate)},updateManagement:function(e){var t=e.index;delete e.index,this.managementList[t]=e},deleteManagement:function(e){var t=e.index;this.managementList.splice(t,1)},toDate:function(e){this.getCurManagementData(e),this.currentDate=e},compare2Date:function(e,t){var n=new Date(e.split("T")[0]),a=new Date(t.split("T")[0]),i=n.getTime(),r=a.getTime();return i<r?-1:i>r?1:0},daysBetween:function(e,t){var n=e.split("/"),a=new Date(Number(n[0]),Number(n[1])-1,Number(n[2]));n=t.split("/");var i=new Date(Number(n[0]),Number(n[1])-1,Number(n[2])),r=864e5;return Math.round(Math.abs((a-i)/r))},getCurManagementData:function(e){var t=this;this.currentManagementList=[[],[],[],[]],G.forEach((function(n,a){if(0==t.compare2Date(e,n.date))t.pushCurManagement(a,n);else if(1==t.compare2Date(e,n.date)){var i=Number(n.repeat);i>0&&t.daysBetween(e,n.date)%i==0?t.pushCurManagement(a,n):-1==i?e.split("/")[1]==n.date.split("/")[1]&&e.split("/")[2]==n.date.split("/")[2]&&t.pushCurManagement(a,n):-2==i&&n.repeatDate.includes(e)&&t.pushCurManagement(a,n)}}))},pushCurManagement:function(e,t){var n=[2,0,3,1],a=t.urgent?1:0,i=t.important?1:0;t.index=e,this.currentManagementList[n[2*i+a]].push(t)},getDate:function(e){var t=e.split("/"),n=new Date(Number(t[0]),Number(t[1])-1,Number(t[2]));return n},getFormattedDate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=new Date(e);t&&n.setDate(n.getDate()+t);var a=n.getFullYear(),i=n.getMonth()+1,r=n.getDate();return"".concat(a,"/").concat(i,"/").concat(r)},initManagementDate:function(){this.updateIndex=null,this.management={date:null,deadline:null,repeat:0,content:"",urgent:!1,important:!1,repeatDate:[],finishedDate:[]}},addManagement:function(){var e=this,t=this.management;if(t.date&&t.content){if(-2==t.repeat){var n=this.getDate(t.date),a=[0,1,3,7,14,29,59];t.repeatDate=[],a.forEach((function(a){t.repeatDate.push(e.getFormattedDate(n,a))}))}this.updateIndex?(this.managementList[this.updateIndex]=this.management,this.$toast.show("修改成功","success"),this.updateIndex=null,this.modal_show.addPlanShow=!1):(this.managementList.push(this.management),this.$toast.show("添加成功","success"),this.modal_show.addPlanShow=!1)}else this.$toast.show("时间或内容不得为空","error")},getManagementDate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=new Date;t.setDate(t.getDate()+e),this.management.date="".concat(t.getYear()+1900,"/").concat(t.getMonth()+1>10?"":0).concat(t.getMonth()+1,"/").concat(t.getDate()>10?"":0).concat(t.getDate())},showAddPlan:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!this.draged){if(null==e)this.initManagementDate();else if([1,2,3,4].includes(e))switch(this.initManagementDate(),e){case 1:this.management.urgent=!0,this.management.important=!1;break;case 2:this.management.urgent=!0,this.management.important=!0;break;case 3:this.management.urgent=!1,this.management.important=!1;break;case 4:this.management.urgent=!1,this.management.important=!0;break}else this.management=e;this.modal_show.addPlanShow=!0}},preWeek:function(){var e=new Date(this.currentWeek[0]);e.setDate(e.getDate()-7),this.getWeekDate(e)},nextWeek:function(){var e=new Date(this.currentWeek[0]);e.setDate(e.getDate()+7),this.getWeekDate(e)},getWeekDate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=function(e,t){var n=new Date(e);return n.setDate(n.getDate()-t),n};this.today=new Date,e=e?new Date(e):t(this.today,this.today.getDay());for(var n=0;n<7;n++)this.currentWeek[n]=t(e,-n)}}},$=n(48998);const H=(0,$.Z)(B,[["render",q]]);var K=H}}]);
//# sourceMappingURL=317-legacy.3874af67.js.map